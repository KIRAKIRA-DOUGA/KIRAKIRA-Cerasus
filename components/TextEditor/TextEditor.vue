<script setup lang="ts">
	import { useEditor, EditorContent } from "@tiptap/vue-3";
	import StarterKit from "@tiptap/starter-kit";

	import { Editor } from "@tiptap/core";
	import Document from "@tiptap/extension-document";
	import Paragraph from "@tiptap/extension-paragraph";
	import Text from "@tiptap/extension-text";

	import VueComponent from "./Extension";

	const editor = shallowRef();

	onMounted(() => {
		const targetElement = document.querySelector(".element");
		editor.value = new Editor({
			element: targetElement || undefined,
			extensions: [
				StarterKit,
				VueComponent,
			],
			content: `
				<p>I'm running Tiptap with Vue.js. ğŸ‰</p>
				<vue-component></vue-component>
				<p>Did you see that? That's a Vue component. We are really living in the future.</p>
			`,
			autofocus: true,
			editable: true,
			injectCSS: false,
		});
	});

	const black = () => {
		editor.value && editor.value.chain().focus().toggleBold().run();
	};

	const addVueComponents = () => {
		console.log("aaaa");
	};

	onBeforeUnmount(() => {
		editor.value.destroy();
	});
</script>

<template>
	<div class="container">
		<LocaleLink to="/">Home</LocaleLink>

		<br />

		<ThumbVideo
			link="video"
			uploader="è‰¾äº†ä¸ªæ‹‰"
			:date="new Date()"
			:watchedCount="233_0000"
			:duration="new Duration(2, 33)"
		>æµ‹è¯•è§†é¢‘</ThumbVideo>
		
		<div>
			åŸºäº <a href="https://tiptap.dev/introduction">Tiptap</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;ä»£ç ä½ç½®ï¼šcomponents/TextEditor/*&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;ä»¥ä¸‹ä¸ºå¯Œæ–‡æœ¬æµ‹è¯•...
		</div>
		<div>
			åŸºæœ¬çš„æ ·å¼ï¼Œæ¯”å¦‚é€‰ä¸­åŠ ç²—æ˜¯å¯ä»¥å®ç°çš„ï¼Œä½†æ˜¯<a href="https://tiptap.dev/guide/node-views/vue">åŠ è½½ Vue ç»„ä»¶ä½œä¸ºå¯Œæ–‡æœ¬çš„ node</a> çš„æ­¥éª¤å¹¶ä¸é¡ºåˆ©...
		</div>

		<div class="element text-editor">
			<div class="menu">
				<span class="menu-item" @click="black()">åŠ ç²—</span>
				<span class="menu-item" @click="addVueComponents()">Add Vue Components</span>
			</div>
		</div>

	</div>
</template>

<i18n lang="json5">
	{
		zh: {
			editor: "å¯Œæ–‡æœ¬ç¼–è¾‘å™¨",
		},
		en: {
			editor: "Text Editor",
		},
		ja: {
			editor: "ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿",
		},
	}
</i18n>

<style scoped lang="scss">
	.text-editor {
		background-color: #EEEEEE;
	}
	.menu {
		position: relative;
		top: 5px;
		left: 5px;

		margin-bottom: 10px;
	}
	.menu-item {
		text-align: center;
		background-color: #DDDDDD;

		margin: 5px;
	}
	.menu-item:hover {
		background-color: #CCCCCC;
		cursor: pointer;
	}
</style>
